{% if notifications %}
{% for notification in notifications %}
	
	
		{% set notifyDate = date(notification.created_at) %}
		
		{%  if notifyDate  >= date("today") %}
			{% set group = 'Today' %}
		{% elseif notifyDate >= date("yesterday") %}
			{% set group = 'Yesterday' %}
		{% else %}
			{% set group = notifyDate|date('F d') %}
		{% endif %}
	
	{% if currentGroup != group %}
		{% set currentGroup = group %}

		{% if not tools and unReadCount > 0 %}
			{% set tools = true %}
			<div class="col-md-12">
			<a data-request="onMarkAllRead" 
			   data-request-success="$('div.notification-unread').removeClass('notification-unread');"
			   href="#" class="pull-right">mark all as read</a>	
			</div>
		{% endif %}

		<h3>{{ currentGroup }}</h3>
			
	{% endif %}
	
	
	<div class="notification {{ ( not notification.is_read )? 'notification-unread' : '' }}">
		{% if not notification.is_read %}
		<button data-request="onMarkRead" 
				data-request-data="id: {{ notification.id }}"
				data-request-success="$($el).parent('div').removeClass('notification-unread');"
				type="button" class="close" >
				<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
		</button>
		{% endif %}
		
		{% if notification.subject %}
			<h4>{{ notification.subject }}</h4>
		{% endif %}
		<div id="message">
			{{ notification.message|raw }}
		</div>
		<div id="time">
			<small>{{ notification.created_at|date("g:i A") }}</small>
		</div>

	</div>	
{% endfor %}
{% else %}
	<div>
		<p class="text-center lead">There are no new notifications</p>
	</div>

{% endif %}