\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup}{}\section{D\+M\+A\textbackslash{}Friends\textbackslash{}Models\textbackslash{}User\+Group Class Reference}
\label{classDMA_1_1Friends_1_1Models_1_1UserGroup}\index{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group@{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group}}
Inheritance diagram for D\+M\+A\textbackslash{}Friends\textbackslash{}Models\textbackslash{}User\+Group\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{d2/daf/classDMA_1_1Friends_1_1Models_1_1UserGroup}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7f998f837a0bd734e0f1496f6902793f}{get\+Users} ()
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_af7f583bd7db92cfdc21eb4e5ed7bdabb}{generate\+Code} ()
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a13eaffc2b414fe5dfd42aa6ac5fe75ca}{add\+User} (\&\$user)
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_ac08ee6038b5f0314c341123025484b91}{remove\+User} (\$user)
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_aab0755a408dcbff4a64277cd9032b9bf}{in\+Group} (\$user, \$include\+All=false)
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_ac55e9a0b178ed308374720c3dd9d7f90}{accept\+Membership} (\&\$user)
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a09e0cf14a97b5618bd5db36dc320bf7e}{reject\+Membership} (\&\$user)
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a0e21f8d83c3a53b9119fff9395da55a4}{cancel\+Membership} (\&\$user)
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a4b341d8ba24955f26f2d0dc9d8dbc0ab}{send\+Notification} (\&\$user, \$notification\+Name, array \$channel=null)
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_af5985b34eee59820cb9ac6c28c01b725}{scope\+Is\+Active} (\$query)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a556c5f9443e270feb7824c30de13b85f}{boot} ()
\item 
static \hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_aab4ef6fdd0f8d9d18ca905250c7e00c5}{mark\+Inactive\+Groups} ()
\item 
static \hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_aad51304db18c13520b9753e2380089bb}{create\+Group} (\$user, \$name)
\item 
static \hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a31058e5ae8a66da47fac81a70edd7d1a}{join\+By\+Code} (\$code, \$user)
\item 
static \hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a98977f281ed3d9dc85220af0207c764d}{has\+Active\+Memberships} (\$user)
\item 
static \hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_ae4b0877257fa876bbe3226f8dcc1e0b4}{has\+Available\+Memberships} (\$user)
\item 
static \hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a224d129818f1ab0831ddb054dff1f514}{get\+Active\+Memberships\+Count} (\$user)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
{\bfseries \$rules}
\item 
{\bfseries \$belongs\+To\+Many}
\item 
{\bfseries \$belongs\+To}
\item 
{\bfseries \$morph\+Many}
\item 
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7c8222c3e74df7e5f392db954bc6e70b}{}const {\bfseries M\+E\+M\+B\+E\+R\+S\+H\+I\+P\+\_\+\+P\+E\+N\+D\+I\+N\+G} = \textquotesingle{}P\+E\+N\+D\+I\+N\+G\textquotesingle{}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7c8222c3e74df7e5f392db954bc6e70b}

\item 
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7c23f715047baa55b359250eb7ec3936}{}const {\bfseries M\+E\+M\+B\+E\+R\+S\+H\+I\+P\+\_\+\+A\+C\+C\+E\+P\+T\+E\+D} = \textquotesingle{}A\+C\+C\+E\+P\+T\+E\+D\textquotesingle{}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7c23f715047baa55b359250eb7ec3936}

\item 
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a4d38303c9b869050114862be4674191f}{}const {\bfseries M\+E\+M\+B\+E\+R\+S\+H\+I\+P\+\_\+\+R\+E\+J\+E\+C\+T\+E\+D} = \textquotesingle{}R\+E\+J\+E\+C\+T\+E\+D\textquotesingle{}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a4d38303c9b869050114862be4674191f}

\item 
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a40fdb6407bcd12e19a13706ced558e40}{}const {\bfseries M\+E\+M\+B\+E\+R\+S\+H\+I\+P\+\_\+\+C\+A\+N\+C\+E\+L\+L\+E\+D} = \textquotesingle{}C\+A\+N\+C\+E\+L\+L\+E\+D\textquotesingle{}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a40fdb6407bcd12e19a13706ced558e40}

\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a1d29514398539f2e5579d0cc4c6a26fa}{fire\+Group\+Event} (\$event, \$params=\mbox{[}$\,$\mbox{]})
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7a52268ecbdd67ab80d28d65a8149a5a}{set\+Membership\+Status} (\&\$user, \$status, \$test\+User\+In\+Group=true)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_aee86ae41de6359cbf5f2f6bfd786f3b3}{}{\bfseries \$table} = \textquotesingle{}dma\+\_\+friends\+\_\+user\+\_\+groups\textquotesingle{}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_aee86ae41de6359cbf5f2f6bfd786f3b3}

\item 
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a648519751985d808d8c65bcd3bc07eb0}{}{\bfseries \$group\+Users}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a648519751985d808d8c65bcd3bc07eb0}

\end{DoxyCompactItemize}


\subsection{Member Function Documentation}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_ac55e9a0b178ed308374720c3dd9d7f90}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!accept\+Membership@{accept\+Membership}}
\index{accept\+Membership@{accept\+Membership}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{accept\+Membership}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::accept\+Membership (
\begin{DoxyParamCaption}
\item[{\&}]{\$user}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_ac55e9a0b178ed308374720c3dd9d7f90}
User accept invite 
\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyCode}
312     \{
313         \textcolor{comment}{// Test if the given user has available memberships}
314         \textcolor{keywordflow}{if}(!self::hasAvailableMemberships($user))
315             \textcolor{keywordflow}{return} \textcolor{keyword}{false};        
316         $status = $this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7a52268ecbdd67ab80d28d65a8149a5a}{setMembershipStatus}($user, self::MEMBERSHIP\_ACCEPTED);
317         \textcolor{keywordflow}{return} $status == self::MEMBERSHIP\_ACCEPTED;
318     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a13eaffc2b414fe5dfd42aa6ac5fe75ca}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!add\+User@{add\+User}}
\index{add\+User@{add\+User}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{add\+User}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::add\+User (
\begin{DoxyParamCaption}
\item[{\&}]{\$user}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a13eaffc2b414fe5dfd42aa6ac5fe75ca}
Adds the user to the group. 
\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyCode}
223     \{
224 
225         \textcolor{keywordflow}{if} (count($this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7f998f837a0bd734e0f1496f6902793f}{getUsers}()) < Settings::get(\textcolor{stringliteral}{'maximum\_users\_per\_group'})
226             && $this->is\_active )\{
227             \textcolor{keywordflow}{if} (!$this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_aab0755a408dcbff4a64277cd9032b9bf}{inGroup}($user) && 
228                     $this->owner->getKey() != $user->getKey()) \{
229                 
230                 \textcolor{comment}{// Test if the given user has available memberships }
231                 \textcolor{keywordflow}{if}(!self::hasAvailableMemberships($user))
232                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
233                 
234                 \textcolor{keywordflow}{try}\{
235                     $this->users()->attach($user);
236                     $this->groupUsers = null;
237                     
238                 \}\textcolor{keywordflow}{catch}(QueryException $e)\{
239                     \textcolor{comment}{// SQL integrity user and group relation already exists.}
240                     \textcolor{keywordflow}{if} ($e->getCode() == 23000)\{
241                         \textcolor{comment}{// User was part of the group but rejected or cancel}
242                         \textcolor{comment}{// the membership. As the user is not part of other group}
243                         \textcolor{comment}{// yet, the creator is able to re-invite user to join the group}
244                         $this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7a52268ecbdd67ab80d28d65a8149a5a}{setMembershipStatus}($user, self::MEMBERSHIP\_PENDING, 
      $testUserInGroup=\textcolor{keyword}{false});
245                     \}
246                 \}
247                 
248                 $this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a4b341d8ba24955f26f2d0dc9d8dbc0ab}{sendNotification}($user, \textcolor{stringliteral}{'group-request'}, [\textcolor{stringliteral}{'mail'}, \textcolor{stringliteral}{'kiosk'}, \textcolor{stringliteral}{'flash'}])
      ;
249                 
250                 \textcolor{comment}{// Fire event }
251                 $this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a1d29514398539f2e5579d0cc4c6a26fa}{fireGroupEvent}(\textcolor{stringliteral}{'user.added'}, array($this, $user));
252                 
253                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};
254             \}
255         \}\textcolor{keywordflow}{else}\{
256             $message = Lang::get(\textcolor{stringliteral}{'dma.friends::lang.exceptions.limitGroupUsers'});
257             \textcolor{keywordflow}{throw} new \(\backslash\)Exception($message);
258         \}
259 
260         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
261     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a556c5f9443e270feb7824c30de13b85f}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!boot@{boot}}
\index{boot@{boot}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{boot}]{\setlength{\rightskip}{0pt plus 5cm}static D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::boot (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a556c5f9443e270feb7824c30de13b85f}
Attach to the \textquotesingle{}creating\textquotesingle{} Model Event to provide a U\+U\+I\+D for the {\ttfamily id} field (provided by \$model-\/$>$get\+Key\+Name())
\begin{DoxyCode}
73     \{
74         parent::boot();
75     
76         \textcolor{comment}{// Setup event bindings...}
77         \textcolor{comment}{//UserGroup::observe(new UserGroupObserver);}
78         
79 
84         static::saved(\textcolor{keyword}{function} ($model) \{
85             \textcolor{keywordflow}{if}(!$model->code)\{
86                 $model->code = $model->generateCode();
87                 $model->save();
88             \}
89         \});
90     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a0e21f8d83c3a53b9119fff9395da55a4}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!cancel\+Membership@{cancel\+Membership}}
\index{cancel\+Membership@{cancel\+Membership}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{cancel\+Membership}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::cancel\+Membership (
\begin{DoxyParamCaption}
\item[{\&}]{\$user}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a0e21f8d83c3a53b9119fff9395da55a4}
User accept invite 
\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyCode}
337     \{            
338         $status = $this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7a52268ecbdd67ab80d28d65a8149a5a}{setMembershipStatus}($user, self::MEMBERSHIP\_CANCELLED);
339         \textcolor{keywordflow}{return} $status == self::MEMBERSHIP\_CANCELLED;        
340     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_aad51304db18c13520b9753e2380089bb}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!create\+Group@{create\+Group}}
\index{create\+Group@{create\+Group}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{create\+Group}]{\setlength{\rightskip}{0pt plus 5cm}static D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::create\+Group (
\begin{DoxyParamCaption}
\item[{}]{\$user, }
\item[{}]{\$name}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_aad51304db18c13520b9753e2380089bb}
Create a new user group


\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \\
\hline
string & {\em \$name} & name of the group \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{namespaceDMA}{D\+M\+A} 
\end{DoxyReturn}

\begin{DoxyCode}
160     \{
161         $activeGroups = self::where(\textcolor{stringliteral}{'owner\_id'}, $user->getKey())
162                                 ->isActive()->count();
163                
164         \textcolor{keywordflow}{if} ($activeGroups < Settings::get(\textcolor{stringliteral}{'maximum\_groups\_own\_per\_user'})) \{
165         
166             $group = \textcolor{keyword}{new} \textcolor{keyword}{self}();
167             $group->owner = $user;
168             $group->name = $name;
169             
170             \textcolor{keywordflow}{if}($group->save()) \{
171                 \(\backslash\)Postman::send(\textcolor{stringliteral}{'group-creation'}, \textcolor{keyword}{function}($notification) use ($user, $user, $group)\{
172                     $notification->to($user, $user->name);
173                     $notification->subject(\textcolor{stringliteral}{"Group '$group->name' created"});
174                     $notification->message(\textcolor{stringliteral}{'You have succesfully create a new group'});
175                     $notification->attachObject($group);
176                 \}, [\textcolor{stringliteral}{'kiosk'}, \textcolor{stringliteral}{'flash'}]);
177             \}
178                         
179             \textcolor{keywordflow}{return} $group;
180         \}\textcolor{keywordflow}{else}\{
181             $message = Lang::get(\textcolor{stringliteral}{'dma.friends::lang.exceptions.limitUserOwnGroups'});
182             \textcolor{keywordflow}{throw} new \(\backslash\)Exception($message);
183         \}
184     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a1d29514398539f2e5579d0cc4c6a26fa}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!fire\+Group\+Event@{fire\+Group\+Event}}
\index{fire\+Group\+Event@{fire\+Group\+Event}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{fire\+Group\+Event}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::fire\+Group\+Event (
\begin{DoxyParamCaption}
\item[{}]{\$event, }
\item[{}]{\$params = {\ttfamily \mbox{[}\mbox{]}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a1d29514398539f2e5579d0cc4c6a26fa}
Fire an event and call the listeners. 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$event} & Event name \\
\hline
array & {\em \$params} & Event parameters \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
112     \{
113         \textcolor{comment}{// TODO : This method could be converted in a Trait }
114         
115         \textcolor{comment}{// Add event namespace}
116         $event = \textcolor{stringliteral}{"dma.friends.group.$event"};
117         \textcolor{comment}{// Fire local event calling October Trait fireEvent}
118         \textcolor{comment}{//return $this->fireEvent($event, $params, $halt);}
119         \textcolor{comment}{// Fire Global event }
120         Event::fire($event, $params);
121     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_af7f583bd7db92cfdc21eb4e5ed7bdabb}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!generate\+Code@{generate\+Code}}
\index{generate\+Code@{generate\+Code}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{generate\+Code}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::generate\+Code (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_af7f583bd7db92cfdc21eb4e5ed7bdabb}
Generate a unique code for this group. This code can be used to join this group \begin{DoxyReturn}{Returns}
string 
\end{DoxyReturn}

\begin{DoxyCode}
193     \{
194         $hashids = \textcolor{keyword}{new} Hashids(\textcolor{stringliteral}{'friends'}, 6, \textcolor{stringliteral}{'ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890'});
195         $id = $this->getKey();
196         $owner\_id = $this->owner->getKey();
197         $code = $hashids->encode($id, $owner\_id);
198         \textcolor{keywordflow}{return} $code;
199     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a224d129818f1ab0831ddb054dff1f514}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!get\+Active\+Memberships\+Count@{get\+Active\+Memberships\+Count}}
\index{get\+Active\+Memberships\+Count@{get\+Active\+Memberships\+Count}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{get\+Active\+Memberships\+Count}]{\setlength{\rightskip}{0pt plus 5cm}static D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::get\+Active\+Memberships\+Count (
\begin{DoxyParamCaption}
\item[{}]{\$user}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a224d129818f1ab0831ddb054dff1f514}
Count active memberships for a given user


\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
integer 
\end{DoxyReturn}

\begin{DoxyCode}
411                                                            \{
412         $status = self::MEMBERSHIP\_ACCEPTED;
413         \textcolor{keywordflow}{return} self::where(\textcolor{stringliteral}{'is\_active'}, \textcolor{keyword}{true})
414                 ->with(\textcolor{stringliteral}{'users'})
415                 ->whereHas(\textcolor{stringliteral}{'users'}, \textcolor{keyword}{function}($query) use ($user, $status)\{
416                     $query->where(\textcolor{stringliteral}{'membership\_status'}, $status)
417                     ->where(\textcolor{stringliteral}{'user\_id'}, $user->getKey());
418                 \}
419         )->count();
420     
421     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7f998f837a0bd734e0f1496f6902793f}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!get\+Users@{get\+Users}}
\index{get\+Users@{get\+Users}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{get\+Users}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::get\+Users (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7f998f837a0bd734e0f1496f6902793f}
Returns an array of users which the given group belongs to. Only returns Pending and Active users.

\begin{DoxyReturn}{Returns}
array 
\end{DoxyReturn}

\begin{DoxyCode}
139     \{
140         \textcolor{keywordflow}{if} (!$this->groupUsers)\{
141             $this->groupUsers = $this->users()->where(\textcolor{keyword}{function}($query)\{
142                    $status = [ UserGroup::MEMBERSHIP\_PENDING,
143                                UserGroup::MEMBERSHIP\_ACCEPTED
144                             ];
145                     $query->whereIn(\textcolor{stringliteral}{'membership\_status'}, $status);
146             \})->\textcolor{keyword}{get}();  
147         \}          
148             
149         \textcolor{keywordflow}{return} $this->groupUsers;
150     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a98977f281ed3d9dc85220af0207c764d}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!has\+Active\+Memberships@{has\+Active\+Memberships}}
\index{has\+Active\+Memberships@{has\+Active\+Memberships}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{has\+Active\+Memberships}]{\setlength{\rightskip}{0pt plus 5cm}static D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::has\+Active\+Memberships (
\begin{DoxyParamCaption}
\item[{}]{\$user}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a98977f281ed3d9dc85220af0207c764d}
Test if user has active memberships


\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
boolean 
\end{DoxyReturn}

\begin{DoxyCode}
388                                                       \{
389         \textcolor{keywordflow}{return} self::getActiveMembershipsCount($user) > 0;
390     \}  
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_ae4b0877257fa876bbe3226f8dcc1e0b4}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!has\+Available\+Memberships@{has\+Available\+Memberships}}
\index{has\+Available\+Memberships@{has\+Available\+Memberships}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{has\+Available\+Memberships}]{\setlength{\rightskip}{0pt plus 5cm}static D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::has\+Available\+Memberships (
\begin{DoxyParamCaption}
\item[{}]{\$user}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_ae4b0877257fa876bbe3226f8dcc1e0b4}
Test if user has available memberships left


\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
boolean 
\end{DoxyReturn}

\begin{DoxyCode}
398                                                          \{
399         $memberships = self::getActiveMembershipsCount($user);
400         \textcolor{keywordflow}{return} $memberships < Settings::get(\textcolor{stringliteral}{'maximum\_user\_group\_memberships'});
401     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_aab0755a408dcbff4a64277cd9032b9bf}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!in\+Group@{in\+Group}}
\index{in\+Group@{in\+Group}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{in\+Group}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::in\+Group (
\begin{DoxyParamCaption}
\item[{}]{\$user, }
\item[{}]{\$include\+All = {\ttfamily false}}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_aab0755a408dcbff4a64277cd9032b9bf}
See if the user is in the group. 
\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & boolean if True check all users attach to the group regarless of the status. if True check only filtered users returned by get\+Users method. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyCode}
291     \{
292         $users = $this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7f998f837a0bd734e0f1496f6902793f}{getUsers}();
293         \textcolor{keywordflow}{if} ($includeAll) $users = $this->users()->get();
294         
295         \textcolor{keywordflow}{foreach} ($users as $u) \{
296             \textcolor{keywordflow}{if} ($u->getKey() == $user->getKey())
297                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};
298         \}
299     
300         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
301     \}    
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a31058e5ae8a66da47fac81a70edd7d1a}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!join\+By\+Code@{join\+By\+Code}}
\index{join\+By\+Code@{join\+By\+Code}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{join\+By\+Code}]{\setlength{\rightskip}{0pt plus 5cm}static D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::join\+By\+Code (
\begin{DoxyParamCaption}
\item[{}]{\$code, }
\item[{}]{\$user}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a31058e5ae8a66da47fac81a70edd7d1a}
Join user to a given group using its code 
\begin{DoxyParams}[1]{Parameters}
sting & {\em \$code} & Group code \\
\hline
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{namespaceDMA}{D\+M\+A} 
\end{DoxyReturn}

\begin{DoxyCode}
210     \{
211         $group = static::where(\textcolor{stringliteral}{'code'}, $code)->firstOrFail();
212         $group->addUser($user);
213         $group->acceptMembership($user);
214         \textcolor{keywordflow}{return} $group;
215     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_aab4ef6fdd0f8d9d18ca905250c7e00c5}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!mark\+Inactive\+Groups@{mark\+Inactive\+Groups}}
\index{mark\+Inactive\+Groups@{mark\+Inactive\+Groups}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{mark\+Inactive\+Groups}]{\setlength{\rightskip}{0pt plus 5cm}static D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::mark\+Inactive\+Groups (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_aab4ef6fdd0f8d9d18ca905250c7e00c5}
Mark inactive all open groups 
\begin{DoxyParams}[1]{Parameters}
unknown & {\em \$datetime} & \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
127                                                \{
128         \textcolor{keywordflow}{return} self::where(\textcolor{stringliteral}{'is\_active'}, \textcolor{charliteral}{'='}, \textcolor{keyword}{true})
129         ->update(array(\textcolor{stringliteral}{'is\_active'} => \textcolor{keyword}{false}));
130     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a09e0cf14a97b5618bd5db36dc320bf7e}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!reject\+Membership@{reject\+Membership}}
\index{reject\+Membership@{reject\+Membership}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{reject\+Membership}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::reject\+Membership (
\begin{DoxyParamCaption}
\item[{\&}]{\$user}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a09e0cf14a97b5618bd5db36dc320bf7e}
User accept invite 
\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyCode}
326     \{
327         $status = $this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7a52268ecbdd67ab80d28d65a8149a5a}{setMembershipStatus}($user, self::MEMBERSHIP\_REJECTED);
328         \textcolor{keywordflow}{return} $status == self::MEMBERSHIP\_REJECTED;
329     \}    
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_ac08ee6038b5f0314c341123025484b91}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!remove\+User@{remove\+User}}
\index{remove\+User@{remove\+User}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{remove\+User}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::remove\+User (
\begin{DoxyParamCaption}
\item[{}]{\$user}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_ac08ee6038b5f0314c341123025484b91}
Removes the user from the group. 
\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyCode}
269     \{
270         \textcolor{keywordflow}{if} ($this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_aab0755a408dcbff4a64277cd9032b9bf}{inGroup}($user, $includeAll=\textcolor{keyword}{true})) \{
271             $this->users()->detach($user);
272             $this->groupUsers = null;
273             
274             \textcolor{comment}{// Fire event}
275             $this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a1d29514398539f2e5579d0cc4c6a26fa}{fireGroupEvent}(\textcolor{stringliteral}{'user.removed'}, array($this, $user));
276             
277             \textcolor{keywordflow}{return} \textcolor{keyword}{true};
278         \}
279     
280         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
281     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_af5985b34eee59820cb9ac6c28c01b725}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!scope\+Is\+Active@{scope\+Is\+Active}}
\index{scope\+Is\+Active@{scope\+Is\+Active}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{scope\+Is\+Active}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::scope\+Is\+Active (
\begin{DoxyParamCaption}
\item[{}]{\$query}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_af5985b34eee59820cb9ac6c28c01b725}
Scope to return only active groups 
\begin{DoxyParams}{Parameters}
{\em \$query} & \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
472                                          \{
473         \textcolor{keywordflow}{return} $query->where(\textcolor{stringliteral}{'is\_active'}, \textcolor{keyword}{true});
474     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a4b341d8ba24955f26f2d0dc9d8dbc0ab}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!send\+Notification@{send\+Notification}}
\index{send\+Notification@{send\+Notification}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{send\+Notification}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::send\+Notification (
\begin{DoxyParamCaption}
\item[{\&}]{\$user, }
\item[{}]{\$notification\+Name, }
\item[{array}]{\$channel = {\ttfamily null}}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a4b341d8ba24955f26f2d0dc9d8dbc0ab}

\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \$user \\
\hline
string & {\em \$notification\+Name} & \\
\hline
array & {\em \$channel} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
boolean$\vert$\+Ambigous $<$boolean, void$>$ 
\end{DoxyReturn}

\begin{DoxyCode}
434     \{
435         \textcolor{comment}{// Check if the user is part of the group or the owner.}
436         \textcolor{keywordflow}{if} (!$this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_aab0755a408dcbff4a64277cd9032b9bf}{inGroup}($user)) 
437             \textcolor{keywordflow}{if}($this->owner->getKey() != $user->getKey()) 
438                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};
439             
440         $group      = $this;
441         $fromUser   = $this->owner;
442         \(\backslash\)Postman::send($notificationName, \textcolor{keyword}{function}($notification) use ($user, $fromUser, $group)\{
443             $notification->to($user, $user->name);
444             $notification->from($fromUser);
445             $notification->subject(\textcolor{stringliteral}{'Groups'});
446             $notification->attachObject($group);
447         \}, $channel);
448         
449         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
450     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7a52268ecbdd67ab80d28d65a8149a5a}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!set\+Membership\+Status@{set\+Membership\+Status}}
\index{set\+Membership\+Status@{set\+Membership\+Status}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{set\+Membership\+Status}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::set\+Membership\+Status (
\begin{DoxyParamCaption}
\item[{\&}]{\$user, }
\item[{}]{\$status, }
\item[{}]{\$test\+User\+In\+Group = {\ttfamily true}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a7a52268ecbdd67ab80d28d65a8149a5a}
Change membership status, send notification. 
\begin{DoxyParams}[1]{Parameters}
Rain\+Lab\textbackslash{}\+User\textbackslash{}\+Models\textbackslash{}\+User & {\em \$user} & \\
\hline
string & {\em \$status} & P\+E\+N\+D\+I\+N\+G, A\+C\+C\+E\+P\+T\+E\+D, R\+E\+J\+E\+C\+T\+E\+D, C\+A\+N\+C\+E\+L\+L\+E\+D \\
\hline
boolean & {\em \$test\+User\+In\+Group} & If true only allow to change status to active or pending users. If false ignore this restriction. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string 
\end{DoxyReturn}

\begin{DoxyCode}
351     \{
352         \textcolor{keywordflow}{if} ($this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_aab0755a408dcbff4a64277cd9032b9bf}{inGroup}($user, $includeAll=!$testUserInGroup))\{
353             
354             \textcolor{comment}{// FIXME : See comments in loadPivot method}
355             $this->loadPivot($user);
356             
357             \textcolor{keywordflow}{if} ($user->pivot->membership\_status != $status)\{
358                 $user->pivot->membership\_status = $status;
359                 $user->pivot->save();
360                 
361                 \textcolor{comment}{// Clean cache of groups}
362                 $this->groupUsers = null;
363                 
364                 \textcolor{comment}{// Send notification to group owners if the status}
365                 \textcolor{comment}{// is different to PENDING. That notification is send by addUser.}
366                 \textcolor{keywordflow}{if} ($status != self::MEMBERSHIP\_PENDING)\{
367                     $notificationName = \textcolor{stringliteral}{'group-'} . strtolower($status);
368                     $this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a4b341d8ba24955f26f2d0dc9d8dbc0ab}{sendNotification}($this->owner, $notificationName, [\textcolor{stringliteral}{'mail'}, \textcolor{stringliteral}{'
      kiosk'}]);
369                     
370                     \textcolor{comment}{// Fire event}
371                     $event = strtolower($status);
372                     $this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1UserGroup_a1d29514398539f2e5579d0cc4c6a26fa}{fireGroupEvent}(\textcolor{stringliteral}{"invite.$event"}, array($this, $user));
373                 \}
374             \}\textcolor{keywordflow}{else}\{
375                 \textcolor{comment}{// Return current user status}
376                 \textcolor{keywordflow}{return} $user->pivot->membership\_status; 
377             \}
378             \textcolor{keywordflow}{return} $status;
379         \}
380     \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a941362fd666e66db70f4b5951cba0154}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!\$belongs\+To@{\$belongs\+To}}
\index{\$belongs\+To@{\$belongs\+To}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{\$belongs\+To}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::\$belongs\+To}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a941362fd666e66db70f4b5951cba0154}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= [
        \textcolor{stringliteral}{'owner'} => [\textcolor{stringliteral}{'Rainlab\(\backslash\)User\(\backslash\)Models\(\backslash\)User'}, \textcolor{stringliteral}{'foreignKey'} => \textcolor{stringliteral}{'owner\_id'}]    
    ]
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_a09a5f57f3092a3bf0aa240cf8ca949a8}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!\$belongs\+To\+Many@{\$belongs\+To\+Many}}
\index{\$belongs\+To\+Many@{\$belongs\+To\+Many}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{\$belongs\+To\+Many}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::\$belongs\+To\+Many}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_a09a5f57f3092a3bf0aa240cf8ca949a8}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= [
        \textcolor{stringliteral}{'users'} => [\textcolor{stringliteral}{'Rainlab\(\backslash\)User\(\backslash\)Models\(\backslash\)User'}, 
            \textcolor{stringliteral}{'table'}         => \textcolor{stringliteral}{'dma\_friends\_users\_groups'}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_ad71c8521c1767d621fe10ea3ce822c3c}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!\$morph\+Many@{\$morph\+Many}}
\index{\$morph\+Many@{\$morph\+Many}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{\$morph\+Many}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::\$morph\+Many}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_ad71c8521c1767d621fe10ea3ce822c3c}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= [
        \textcolor{stringliteral}{'notifications'}  => [\textcolor{stringliteral}{'DMA\(\backslash\)Notification\(\backslash\)Models\(\backslash\)Notification'}, \textcolor{stringliteral}{'name'} => \textcolor{stringliteral}{'object'}],
    ]
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1UserGroup_afe3638379efd008d908f38c86b434c76}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}!\$rules@{\$rules}}
\index{\$rules@{\$rules}!D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group@{D\+M\+A\+::\+Friends\+::\+Models\+::\+User\+Group}}
\subsubsection[{\$rules}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+User\+Group\+::\$rules}\label{classDMA_1_1Friends_1_1Models_1_1UserGroup_afe3638379efd008d908f38c86b434c76}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= [
        \textcolor{stringliteral}{'is\_active'} => \textcolor{stringliteral}{'boolean'}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
models/User\+Group.\+php\end{DoxyCompactItemize}
