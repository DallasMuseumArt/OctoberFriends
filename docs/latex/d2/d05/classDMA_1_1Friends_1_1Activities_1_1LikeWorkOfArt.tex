\hypertarget{classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt}{\section{D\+M\+A\textbackslash{}Friends\textbackslash{}Activities\textbackslash{}Like\+Work\+Of\+Art Class Reference}
\label{classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt}\index{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Activities\textbackslash{}\+Like\+Work\+Of\+Art@{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Activities\textbackslash{}\+Like\+Work\+Of\+Art}}
}
Inheritance diagram for D\+M\+A\textbackslash{}Friends\textbackslash{}Activities\textbackslash{}Like\+Work\+Of\+Art\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{d2/d05/classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt_ad8755c7d0fc4f34acfabc7716acfd52c}{details} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt_a814a0bc1a22cc72f91dac635c871b43c}{process} (User \$user, \$params)
\item 
static \hyperlink{classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt_ac18459839d22721c79df721a6f9b7f8b}{is\+Assession\+Number} (\$code)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Member Function Documentation}
\hypertarget{classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt_ad8755c7d0fc4f34acfabc7716acfd52c}{\index{D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art@{D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art}!details@{details}}
\index{details@{details}!D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art@{D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art}}
\subsubsection[{details}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Activities\textbackslash{}\+Like\+Work\+Of\+Art\+::details (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt_ad8755c7d0fc4f34acfabc7716acfd52c}


Implements \hyperlink{interfaceDMA_1_1Friends_1_1Classes_1_1ActivityTypeBaseInterface}{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Classes\textbackslash{}\+Activity\+Type\+Base\+Interface}.


\begin{DoxyCode}
19     \{
20         \textcolor{keywordflow}{return} [
21             \textcolor{stringliteral}{'name'}          => \textcolor{stringliteral}{'Like a work of art'},
22             \textcolor{stringliteral}{'description'}   => \textcolor{stringliteral}{'enter an assession id to like a work of art'},
23         ];
24     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt_ac18459839d22721c79df721a6f9b7f8b}{\index{D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art@{D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art}!is\+Assession\+Number@{is\+Assession\+Number}}
\index{is\+Assession\+Number@{is\+Assession\+Number}!D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art@{D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art}}
\subsubsection[{is\+Assession\+Number}]{\setlength{\rightskip}{0pt plus 5cm}static D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Activities\textbackslash{}\+Like\+Work\+Of\+Art\+::is\+Assession\+Number (
\begin{DoxyParamCaption}
\item[{}]{\$code}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt_ac18459839d22721c79df721a6f9b7f8b}
Take a string of text and determine if it is an assession object


\begin{DoxyParams}{Parameters}
{\em string} & A string of text to check\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
mixed boolean, array boolean False if code is an assession number array if code is an assession number 
\end{DoxyReturn}

\begin{DoxyCode}
80     \{
81         \textcolor{comment}{// Brain API request template URL}
82         $template = \textcolor{stringliteral}{'
      http://brain.dma.org/api/v1/collection/object/?fields=id,number,title&format=json&number=%s'};
83         
84         \textcolor{comment}{// Clean code from spaces in case user miss type it}
85         $code     = str\_replace(\textcolor{charliteral}{' '}, \textcolor{stringliteral}{''}, $code);
86         
87         \textcolor{comment}{// Get URL}
88         $url      = sprintf($template, urlencode($code));
89         
90         \textcolor{comment}{// Call Brain}
91         $response = Request::get($url)                   
92                             ->send();
93         
94         \textcolor{keywordflow}{if}($obj = @$response->body->results[0])\{
95             $data = [
96                 \textcolor{stringliteral}{'object\_id'}     => $obj->id,
97                 \textcolor{stringliteral}{'object\_number'} => $obj->number,
98                 \textcolor{stringliteral}{'object\_title'}  => $obj->title
99             ];
100             
101             \textcolor{keywordflow}{return} $data;
102            
103         \}
104         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
105         
106     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt_a814a0bc1a22cc72f91dac635c871b43c}{\index{D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art@{D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art}!process@{process}}
\index{process@{process}!D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art@{D\+M\+A\+::\+Friends\+::\+Activities\+::\+Like\+Work\+Of\+Art}}
\subsubsection[{process}]{\setlength{\rightskip}{0pt plus 5cm}static D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Activities\textbackslash{}\+Like\+Work\+Of\+Art\+::process (
\begin{DoxyParamCaption}
\item[{User}]{\$user, }
\item[{}]{\$params}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classDMA_1_1Friends_1_1Activities_1_1LikeWorkOfArt_a814a0bc1a22cc72f91dac635c871b43c}
\{inherit\+Doc\} 

Implements \hyperlink{interfaceDMA_1_1Friends_1_1Classes_1_1ActivityTypeBaseInterface}{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Classes\textbackslash{}\+Activity\+Type\+Base\+Interface}.


\begin{DoxyCode}
30     \{        
31         \textcolor{keywordflow}{if} (!isset($params[\textcolor{stringliteral}{'code'}]) || empty($params[\textcolor{stringliteral}{'code'}])) \textcolor{keywordflow}{return} \textcolor{keyword}{false};
32 
33         \textcolor{keywordflow}{if} ($activity = Activity::findActivityType(\textcolor{stringliteral}{'LikeWorkOfArt'})->first()) \{          
34             $code = $params[\textcolor{stringliteral}{'code'}];
35             
36             \textcolor{keywordflow}{if} ($data = self::isAssessionNumber($code))\{
37             
38                 \textcolor{keywordflow}{if} ($ret = parent::process($user, [\textcolor{stringliteral}{'activity'} => $activity])) \{
39                     
40                     \textcolor{comment}{// TODO: Find a better way to pass this data}
41                     $activity->objectData = $data;
42                     unset($data[\textcolor{stringliteral}{'object\_title'}]); \textcolor{comment}{// Don't save title in user metadata table}
43                     
44                     ActivityMetadata::addUserActivity($user, $activity, $data);
45 
46                     \hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_aa3c63d0a5b1ffcd9f58c03e443a2dc8f}{FriendsLog::artwork}([
47                         \textcolor{stringliteral}{'user'}          => $user,
48                         \textcolor{stringliteral}{'artwork\_id'}    => $params[\textcolor{stringliteral}{'code'}],
49                     ]);
50                 \}
51                 
52                 \textcolor{keywordflow}{return} $ret;
53                 
54             \} \textcolor{keywordflow}{else} \{
55                 \textcolor{comment}{// Verify if user try to enter an Object number}
56                 \textcolor{comment}{// Regex expression to match object number format}
57                 $re = \textcolor{stringliteral}{"/((([a-zA-Z0-9\_\(\backslash\)\(\backslash\)-]+\(\backslash\)\(\backslash\).)\{1,\})([a-zA-Z0-9\_\(\backslash\)\(\backslash\)-]+))/"};
58                 $isObjectNumber = (preg\_match\_all($re, str\_replace(\textcolor{charliteral}{' '}, \textcolor{stringliteral}{''},$code)) > 0); 
59                        
60                 \textcolor{keywordflow}{if} ( $isObjectNumber ) \{
61                     Session::put(\textcolor{stringliteral}{'activityError'}, Lang::get(\textcolor{stringliteral}{'
      dma.friends::lang.activities.likeWorkArtCodeError'}, [\textcolor{stringliteral}{'code'} => $params[\textcolor{stringliteral}{'code'}]]));
62                 \}
63             \}     
64        \}
65 
66         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
67 
68     \}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
activities/Like\+Work\+Of\+Art.\+php\end{DoxyCompactItemize}
