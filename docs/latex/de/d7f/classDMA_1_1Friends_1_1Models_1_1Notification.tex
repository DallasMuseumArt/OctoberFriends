\hypertarget{classDMA_1_1Friends_1_1Models_1_1Notification}{}\section{D\+M\+A\textbackslash{}Friends\textbackslash{}Models\textbackslash{}Notification Class Reference}
\label{classDMA_1_1Friends_1_1Models_1_1Notification}\index{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+Notification@{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+Notification}}
Inheritance diagram for D\+M\+A\textbackslash{}Friends\textbackslash{}Models\textbackslash{}Notification\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{de/d7f/classDMA_1_1Friends_1_1Models_1_1Notification}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1Notification_a221608de6df08ac2cab3b145410bc012}{save} (array \$data=N\+U\+L\+L, \$session\+Key=N\+U\+L\+L)
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1Notification_a8618793fa0a9030d6cbfae08a3b74803}{mark\+As\+Read} ()
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1Notification_a547f0a3264c192e47c48f54d7b42c5a5}{scope\+Expire} (\$query)
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1Notification_a92a7c07cfcd4bcb202edb6969fc8c309}{scope\+Unread} (\$query)
\item 
\hyperlink{classDMA_1_1Friends_1_1Models_1_1Notification_a9dd9e4ffa1c0a4047556cd25bcfa0a5a}{scope\+Mark\+All\+As\+Read} (\$query)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDMA_1_1Friends_1_1Models_1_1Notification_a766ad083edbdd33b589c50997154eed2}{}{\bfseries \$rules} = \mbox{[}$\,$\mbox{]}\label{classDMA_1_1Friends_1_1Models_1_1Notification_a766ad083edbdd33b589c50997154eed2}

\item 
\hypertarget{classDMA_1_1Friends_1_1Models_1_1Notification_a5fb26a98fb9520c1444568e1c7e3515d}{}{\bfseries \$dates} = \mbox{[}\textquotesingle{}created\+\_\+at\textquotesingle{}, \textquotesingle{}updated\+\_\+at\textquotesingle{}, \textquotesingle{}sent\+\_\+at\textquotesingle{}\mbox{]}\label{classDMA_1_1Friends_1_1Models_1_1Notification_a5fb26a98fb9520c1444568e1c7e3515d}

\item 
{\bfseries \$belongs\+To}
\item 
{\bfseries \$morph\+To}
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDMA_1_1Friends_1_1Models_1_1Notification_a4ff4d970351d372ad03efddcce990756}{}{\bfseries \$table} = \textquotesingle{}dma\+\_\+friends\+\_\+notification\textquotesingle{}\label{classDMA_1_1Friends_1_1Models_1_1Notification_a4ff4d970351d372ad03efddcce990756}

\end{DoxyCompactItemize}


\subsection{Member Function Documentation}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1Notification_a8618793fa0a9030d6cbfae08a3b74803}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}!mark\+As\+Read@{mark\+As\+Read}}
\index{mark\+As\+Read@{mark\+As\+Read}!D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}}
\subsubsection[{mark\+As\+Read}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+Notification\+::mark\+As\+Read (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1Notification_a8618793fa0a9030d6cbfae08a3b74803}
Helper to mark notifications as read 
\begin{DoxyCode}
62     \{
63         $this->is\_read = \textcolor{keyword}{true};
64         $this->\hyperlink{classDMA_1_1Friends_1_1Models_1_1Notification_a221608de6df08ac2cab3b145410bc012}{save}();
65     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1Notification_a221608de6df08ac2cab3b145410bc012}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}!save@{save}}
\index{save@{save}!D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}}
\subsubsection[{save}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+Notification\+::save (
\begin{DoxyParamCaption}
\item[{array}]{\$data = {\ttfamily NULL}, }
\item[{}]{\$session\+Key = {\ttfamily NULL}}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1Notification_a221608de6df08ac2cab3b145410bc012}

\begin{DoxyCode}
51     \{
52         \textcolor{keywordflow}{if}(is\_null($this->sent\_at))\{
53             $this->sent\_at = $this->freshTimestamp();
54         \}
55         parent::save($data, $sessionKey);
56     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1Notification_a547f0a3264c192e47c48f54d7b42c5a5}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}!scope\+Expire@{scope\+Expire}}
\index{scope\+Expire@{scope\+Expire}!D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}}
\subsubsection[{scope\+Expire}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+Notification\+::scope\+Expire (
\begin{DoxyParamCaption}
\item[{}]{\$query}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1Notification_a547f0a3264c192e47c48f54d7b42c5a5}
Call this scope to expire unread notifications 
\begin{DoxyParams}[1]{Parameters}
mixed & {\em \$query} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
mixed Return query unmodified 
\end{DoxyReturn}

\begin{DoxyCode}
74     \{
75         $expireQuery = clone($query);
76         
77         $expireDays = Settings::get(\textcolor{stringliteral}{'kiosk\_notification\_max\_age'}, 60);
78         $expireDays = (empty($expireDays)) ? 60 : $expireDays;
79         $expireDate = Carbon::today()->subDays($expireDays);
80         
81         $expireQuery->where(\textcolor{stringliteral}{"created\_at"}, \textcolor{stringliteral}{"<="},  $expireDate)
82                     ->unread()
83                     ->update([\textcolor{stringliteral}{'is\_read'} =>  \textcolor{keyword}{true}]);
84         
85         \textcolor{keywordflow}{return} $query;
86     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1Notification_a9dd9e4ffa1c0a4047556cd25bcfa0a5a}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}!scope\+Mark\+All\+As\+Read@{scope\+Mark\+All\+As\+Read}}
\index{scope\+Mark\+All\+As\+Read@{scope\+Mark\+All\+As\+Read}!D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}}
\subsubsection[{scope\+Mark\+All\+As\+Read}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+Notification\+::scope\+Mark\+All\+As\+Read (
\begin{DoxyParamCaption}
\item[{}]{\$query}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1Notification_a9dd9e4ffa1c0a4047556cd25bcfa0a5a}
Scope method for mark all selected messages as read. 
\begin{DoxyCode}
103     \{
104         \textcolor{keywordflow}{return} $query->unread()->update([\textcolor{stringliteral}{'is\_read'} => \textcolor{keyword}{true} ]);
105     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1Notification_a92a7c07cfcd4bcb202edb6969fc8c309}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}!scope\+Unread@{scope\+Unread}}
\index{scope\+Unread@{scope\+Unread}!D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}}
\subsubsection[{scope\+Unread}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+Notification\+::scope\+Unread (
\begin{DoxyParamCaption}
\item[{}]{\$query}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1Models_1_1Notification_a92a7c07cfcd4bcb202edb6969fc8c309}
Scope for selecting un-\/read notifications. 
\begin{DoxyParams}[1]{Parameters}
mixed & {\em \$query} & \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
94     \{
95         \textcolor{keywordflow}{return} $query->where(\textcolor{stringliteral}{'is\_read'}, \textcolor{charliteral}{'='}, \textcolor{keyword}{false});
96     \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1Notification_a7bd3ea8c8431f36da353372d8e42ae44}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}!\$belongs\+To@{\$belongs\+To}}
\index{\$belongs\+To@{\$belongs\+To}!D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}}
\subsubsection[{\$belongs\+To}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+Notification\+::\$belongs\+To}\label{classDMA_1_1Friends_1_1Models_1_1Notification_a7bd3ea8c8431f36da353372d8e42ae44}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= [
        \textcolor{stringliteral}{'user'} => [\textcolor{stringliteral}{'Rainlab\(\backslash\)User\(\backslash\)Models\(\backslash\)User'}]    
    ]
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Models_1_1Notification_ac726a50fd0378357be2f744f4c0bfb66}{}\index{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}!\$morph\+To@{\$morph\+To}}
\index{\$morph\+To@{\$morph\+To}!D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification@{D\+M\+A\+::\+Friends\+::\+Models\+::\+Notification}}
\subsubsection[{\$morph\+To}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+Notification\+::\$morph\+To}\label{classDMA_1_1Friends_1_1Models_1_1Notification_ac726a50fd0378357be2f744f4c0bfb66}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= [
        \textcolor{stringliteral}{'object'},
    ]
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
models/Notification.\+php\end{DoxyCompactItemize}
