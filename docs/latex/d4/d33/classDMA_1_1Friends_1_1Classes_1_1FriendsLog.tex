\hypertarget{classDMA_1_1Friends_1_1Classes_1_1FriendsLog}{\section{D\-M\-A\textbackslash{}Friends\textbackslash{}Classes\textbackslash{}Friends\-Log Class Reference}
\label{classDMA_1_1Friends_1_1Classes_1_1FriendsLog}\index{D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Friends\-Log@{D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Friends\-Log}}
}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a06af9873ad8058d400ebc7773c8e7718}{write} (\$action, \$params)
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_ae120debd1a89910039ff593eca211c35}{activity} (\$params)
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a4bc624b23d091a430c947a7692ce3236}{artwork} (\$params)
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_af177ff30b29bfca5f4f98346d3c2a1ef}{checkin} (\$params)
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_abcfe492c8b9959959800cb3844c7b77b}{points} (\$params)
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_ad4e66121dbf45b44c0206571f0299e51}{reward} (\$params)
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_aa99cc0803ad1ac07b894c1249e04888c}{unlocked} (\$params)
\end{DoxyCompactItemize}


\subsection{Member Function Documentation}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_ae120debd1a89910039ff593eca211c35}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}!activity@{activity}}
\index{activity@{activity}!DMA::Friends::Classes::FriendsLog@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}}
\subsubsection[{activity}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Friends\-Log\-::activity (
\begin{DoxyParamCaption}
\item[{}]{\$params}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_ae120debd1a89910039ff593eca211c35}
Log an activity

\$params An array of parameters to log See \hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a06af9873ad8058d400ebc7773c8e7718}{write()} for details

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\begin{DoxyCode}
70     \{
71         self::write(\textcolor{stringliteral}{'activity'}, $params);
72     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a4bc624b23d091a430c947a7692ce3236}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}!artwork@{artwork}}
\index{artwork@{artwork}!DMA::Friends::Classes::FriendsLog@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}}
\subsubsection[{artwork}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Friends\-Log\-::artwork (
\begin{DoxyParamCaption}
\item[{}]{\$params}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a4bc624b23d091a430c947a7692ce3236}
Log an artwork activity See \hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a06af9873ad8058d400ebc7773c8e7718}{write()} for details

\$params An array of parameters to log

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\begin{DoxyCode}
84     \{
85         self::write(\textcolor{stringliteral}{'artwork'}, $params);
86     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_af177ff30b29bfca5f4f98346d3c2a1ef}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}!checkin@{checkin}}
\index{checkin@{checkin}!DMA::Friends::Classes::FriendsLog@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}}
\subsubsection[{checkin}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Friends\-Log\-::checkin (
\begin{DoxyParamCaption}
\item[{}]{\$params}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_af177ff30b29bfca5f4f98346d3c2a1ef}
Log a checkin See \hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a06af9873ad8058d400ebc7773c8e7718}{write()} for details

\$params An array of parameters to log

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\begin{DoxyCode}
98     \{
99         self::write(\textcolor{stringliteral}{'checkin'}, $params);
100     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_abcfe492c8b9959959800cb3844c7b77b}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}!points@{points}}
\index{points@{points}!DMA::Friends::Classes::FriendsLog@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}}
\subsubsection[{points}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Friends\-Log\-::points (
\begin{DoxyParamCaption}
\item[{}]{\$params}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_abcfe492c8b9959959800cb3844c7b77b}
Log when a user has been awarded points See \hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a06af9873ad8058d400ebc7773c8e7718}{write()} for details

\$params An array of parameters to log

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\begin{DoxyCode}
112     \{
113         self::write(\textcolor{stringliteral}{'points'}, $params);
114     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_ad4e66121dbf45b44c0206571f0299e51}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}!reward@{reward}}
\index{reward@{reward}!DMA::Friends::Classes::FriendsLog@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}}
\subsubsection[{reward}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Friends\-Log\-::reward (
\begin{DoxyParamCaption}
\item[{}]{\$params}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_ad4e66121dbf45b44c0206571f0299e51}
Log when a user redeems a reward See \hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a06af9873ad8058d400ebc7773c8e7718}{write()} for details

\$params An array of parameters to log

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\begin{DoxyCode}
126     \{
127         self::write(\textcolor{stringliteral}{'reward'}, $params);
128     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_aa99cc0803ad1ac07b894c1249e04888c}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}!unlocked@{unlocked}}
\index{unlocked@{unlocked}!DMA::Friends::Classes::FriendsLog@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}}
\subsubsection[{unlocked}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Friends\-Log\-::unlocked (
\begin{DoxyParamCaption}
\item[{}]{\$params}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_aa99cc0803ad1ac07b894c1249e04888c}
Log when a user unlocks an achievement See \hyperlink{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a06af9873ad8058d400ebc7773c8e7718}{write()} for details

\$params An array of parameters to log

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\begin{DoxyCode}
140     \{
141         self::write(\textcolor{stringliteral}{'unlocked'}, $params);
142     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a06af9873ad8058d400ebc7773c8e7718}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}!write@{write}}
\index{write@{write}!DMA::Friends::Classes::FriendsLog@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Friends\-Log}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Friends\-Log\-::write (
\begin{DoxyParamCaption}
\item[{}]{\$action, }
\item[{}]{\$params}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1FriendsLog_a06af9873ad8058d400ebc7773c8e7718}
Write a log entry to the activity log


\begin{DoxyParams}{Parameters}
{\em \$action} & The type of action to be logged\\
\hline
{\em \$params} & An array of parameters about the log entry
\begin{DoxyItemize}
\item 'user\-\_\-id'\-: The user I\-D to associate the log entry
\item 'message'\-: A log message
\item (optional) 'object'\-: A database model to associate the log with
\item (optional) 'points\-\_\-earned'\-: The number of points earned by the action
\item (optional) 'artwork\-\_\-id'\-: The assession number of an artwork to associate the log entry 
\end{DoxyItemize}\\
\hline
\end{DoxyParams}

\begin{DoxyCode}
24     \{
25         $log            = \textcolor{keyword}{new} ActivityLog;
26         $log->user\_id   = $params[\textcolor{stringliteral}{'user\_id'}];
27         $log->site\_id   = \textcolor{stringliteral}{''}; \textcolor{comment}{//TODO implement settings and/or gethostname();}
28         $log->action    = $action;
29         $log->message   = $params[\textcolor{stringliteral}{'message'}];
30         $log->points\_earned = $params[\textcolor{stringliteral}{'points\_earned'}];
31         
32         \textcolor{comment}{// Log date/time}
33         $datetime = \textcolor{keyword}{new} DateTime;
34         $tzstring = date\_default\_timezone\_get();
35         $timezone = \textcolor{keyword}{new} DateTimeZone($tzstring);
36         $datetime->setTimezone($timezone);
37 
38         $log->timestamp = $datetime->format(\textcolor{charliteral}{'c'});
39         $log->timezone  = $datetime->getTimezone()->getName(); 
40 
41         \textcolor{comment}{// Object type and id}
42         \textcolor{comment}{// pass an object in $params['object'] and do some logic for that}
43         \textcolor{keywordflow}{if} (isset($params[\textcolor{stringliteral}{'object'}]) && !empty($params[\textcolor{stringliteral}{'object'}])) \{
44             $log->object\_type   = typeof($params[\textcolor{stringliteral}{'object'}]);
45             $log->object\_id     = $params[\textcolor{stringliteral}{'object'}]->id;
46         \}
47 
48         \textcolor{keywordflow}{if} (isset($params[\textcolor{stringliteral}{'artwork\_id'}]) \{
49             $log->artwork\_id = $params[\textcolor{stringliteral}{'artwork\_id'}];
50         \}
51 
52         $log->save();
53 
54     \}
\end{DoxyCode}


The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
classes/Friends\-Log.\-php\end{DoxyCompactItemize}
