\hypertarget{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource}{}\section{D\+M\+A\textbackslash{}Friends\textbackslash{}A\+P\+I\textbackslash{}Resources\textbackslash{}Activity\+Metadata\+Resource Class Reference}
\label{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource}\index{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+A\+P\+I\textbackslash{}\+Resources\textbackslash{}\+Activity\+Metadata\+Resource@{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+A\+P\+I\textbackslash{}\+Resources\textbackslash{}\+Activity\+Metadata\+Resource}}
Inheritance diagram for D\+M\+A\textbackslash{}Friends\textbackslash{}A\+P\+I\textbackslash{}Resources\textbackslash{}Activity\+Metadata\+Resource\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{d3/d5d/classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_ae6a01ce9c7882d3c741f471557d5a8f2}{index\+By\+User} (\$user\+Id=null)
\item 
\hyperlink{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_a489377740bd451341a243ba778b65e68}{index\+By\+Type\+And\+User} (\$types=null, \$user\+Id=null)
\item 
\hyperlink{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_adcd1fde2ccc77d6f698cbf63c2b1add8}{index} ()
\item 
\hyperlink{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_aa87d629932ed257089513010323e6f7e}{show} (\$id)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_add571e6be47126c2bee474f570c566ab}{apply\+Filters} (\hyperlink{classDMA_1_1Friends_1_1Classes_1_1API_1_1ModelRepository}{Model\+Repository} \$model=null)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_a2d8840084ab4089cd0be441fa95b9357}{}{\bfseries \$model} = \textquotesingle{}\textbackslash{}\hyperlink{classDMA_1_1Friends_1_1Models_1_1ActivityMetadata}{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Models\textbackslash{}\+Activity\+Metadata}\textquotesingle{}\label{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_a2d8840084ab4089cd0be441fa95b9357}

\item 
\hypertarget{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_a4aef74cbec209367d4eb75887f9dfedb}{}{\bfseries \$transformer} = \textquotesingle{}\textbackslash{}\hyperlink{classDMA_1_1Friends_1_1API_1_1Transformers_1_1ActivityMetadataTransformer}{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+A\+P\+I\textbackslash{}\+Transformers\textbackslash{}\+Activity\+Metadata\+Transformer}\textquotesingle{}\label{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_a4aef74cbec209367d4eb75887f9dfedb}

\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Member Function Documentation}
\hypertarget{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_add571e6be47126c2bee474f570c566ab}{}\index{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource@{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource}!apply\+Filters@{apply\+Filters}}
\index{apply\+Filters@{apply\+Filters}!D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource@{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource}}
\subsubsection[{apply\+Filters}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+A\+P\+I\textbackslash{}\+Resources\textbackslash{}\+Activity\+Metadata\+Resource\+::apply\+Filters (
\begin{DoxyParamCaption}
\item[{{\bf Model\+Repository}}]{\$model = {\ttfamily null}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\label{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_add571e6be47126c2bee474f570c566ab}
\begin{DoxySeeAlso}{See also}
\+::apply\+Filters() 
\end{DoxySeeAlso}

\begin{DoxyCode}
223     \{
224         $query = parent::applyFilters($model);
225         \textcolor{comment}{// TODO : is better to transpode the data rows to columns}
226         \textcolor{comment}{// but for now the getMetadata method on ActivityMetadataTransformer}
227         \textcolor{comment}{// and the following groupBy would work.}
228          
229         \textcolor{comment}{// Is necessary group by session\_id, otherwise }
230         \textcolor{comment}{// the response will include duplicates. }
231         $query = $query->groupBy(\textcolor{stringliteral}{'session\_id'});
232 
233         \textcolor{keywordflow}{return} $query;
234     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_adcd1fde2ccc77d6f698cbf63c2b1add8}{}\index{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource@{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource}!index@{index}}
\index{index@{index}!D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource@{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource}}
\subsubsection[{index}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+A\+P\+I\textbackslash{}\+Resources\textbackslash{}\+Activity\+Metadata\+Resource\+::index (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_adcd1fde2ccc77d6f698cbf63c2b1add8}
( path=\char`\"{}activity-\/metadata\char`\"{}, description=\char`\"{}\+Returns all activity medatadata\char`\"{}, summary=\char`\"{}\+Return all activity metadata\char`\"{}, tags=\{ \char`\"{}activity-\/metadata\char`\"{}\},

( ref=\char`\"{}\#/parameters/per\+\_\+page\char`\"{} ), ( ref=\char`\"{}\#/parameters/page\char`\"{} ), ( ref=\char`\"{}\#/parameters/sort\char`\"{} ),

( response=200, description=\char`\"{}\+Successful response\char`\"{}, (ref=\char`\"{}\#/definitions/activity.\+metadata\char`\"{}, type=\char`\"{}array\char`\"{}) ), ( response=500, description=\char`\"{}\+Unexpected error\char`\"{}, (ref=\char`\"{}\#/definitions/error500\char`\"{}) ), ( response=404, description=\char`\"{}\+Not Found\char`\"{}, (ref=\char`\"{}\#/definitions/error404\char`\"{}) ) ) 
\begin{DoxyCode}
272     \{
273         \textcolor{keywordflow}{return} parent::index();
274     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_a489377740bd451341a243ba778b65e68}{}\index{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource@{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource}!index\+By\+Type\+And\+User@{index\+By\+Type\+And\+User}}
\index{index\+By\+Type\+And\+User@{index\+By\+Type\+And\+User}!D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource@{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource}}
\subsubsection[{index\+By\+Type\+And\+User}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+A\+P\+I\textbackslash{}\+Resources\textbackslash{}\+Activity\+Metadata\+Resource\+::index\+By\+Type\+And\+User (
\begin{DoxyParamCaption}
\item[{}]{\$types = {\ttfamily null}, }
\item[{}]{\$user\+Id = {\ttfamily null}}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_a489377740bd451341a243ba778b65e68}
( parameter=\char`\"{}activity\+\_\+metadata\+\_\+types\char`\"{}, description=\char`\"{}\+One or Multiple activity types\char`\"{}, in=\char`\"{}path\char`\"{}, name=\char`\"{}types\char`\"{}, type=\char`\"{}array\char`\"{}, required=true, items=(type=\char`\"{}string\char`\"{}), collection\+Format=\char`\"{}csv\char`\"{}, enum=\{\char`\"{}\+Activity\+Code\char`\"{}, \char`\"{}\+Like\+Work\+Of\+Art\char`\"{}, \char`\"{}\+Points\char`\"{}, \char`\"{}\+Registration\char`\"{}\}, )

( path=\char`\"{}activity-\/metadata/\{types\}\char`\"{}, description=\char`\"{}\+Returns all activity medatadata of activity type\char`\"{}, summary=\char`\"{}\+Return activity metadata by activity type\char`\"{}, tags=\{ \char`\"{}activity-\/metadata\char`\"{}\},

( ref=\char`\"{}\#/parameters/per\+\_\+page\char`\"{} ), ( ref=\char`\"{}\#/parameters/page\char`\"{} ), ( ref=\char`\"{}\#/parameters/sort\char`\"{} ),

\begin{DoxyVerb}@SWG\Parameter(
    ref="#/parameters/activity_metadata_types"    
),

@SWG\Response(
    response=200,
    description="Successful response",
    @SWG\Schema(ref="#/definitions/activity.metadata", type="array")
),
@SWG\Response(
    response=500,
    description="Unexpected error",
    @SWG\Schema(ref="#/definitions/error500")
),
@SWG\Response(
    response=404,
    description="Not Found",
    @SWG\Schema(ref="#/definitions/error404")
\end{DoxyVerb}
 ) )

( path=\char`\"{}activity-\/metadata/\{types\}/user/\{user\}\char`\"{}, description=\char`\"{}\+Returns all activity medatadata of a user\char`\"{}, summary=\char`\"{}\+Return activity metadata by activity type and user id\char`\"{}, tags=\{ \char`\"{}activity-\/metadata\char`\"{}\},

( ref=\char`\"{}\#/parameters/per\+\_\+page\char`\"{} ), ( ref=\char`\"{}\#/parameters/page\char`\"{} ), ( ref=\char`\"{}\#/parameters/sort\char`\"{} ),

( ref=\char`\"{}\#/parameters/activity\+\_\+metadata\+\_\+types\char`\"{} ),

( description=\char`\"{}\+I\+D of user activity medatadata to fetch\char`\"{}, format=\char`\"{}int64\char`\"{}, in=\char`\"{}path\char`\"{}, name=\char`\"{}user\char`\"{}, required=true, type=\char`\"{}integer\char`\"{} ),

( response=200, description=\char`\"{}\+Successful response\char`\"{}, (ref=\char`\"{}\#/definitions/activity.\+metadata\char`\"{}, type=\char`\"{}array\char`\"{}) ), ( response=500, description=\char`\"{}\+Unexpected error\char`\"{}, (ref=\char`\"{}\#/definitions/error500\char`\"{}) ), ( response=404, description=\char`\"{}\+Not Found\char`\"{}, (ref=\char`\"{}\#/definitions/error404\char`\"{}) ) ) Return activity metadata by the given user filtered by activities types 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$types} & comma separted strings \\
\hline
string & {\em \$user} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Response 
\end{DoxyReturn}

\begin{DoxyCode}
192     \{
193         \textcolor{comment}{// Apply query filters and sort parameters}
194         $query = $this->\hyperlink{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_add571e6be47126c2bee474f570c566ab}{applyFilters}();
195         
196         \textcolor{keywordflow}{if}(!is\_null($userId))\{
197             \textcolor{keywordflow}{if}(is\_null($user = User::find($userId)))\{
198                 \textcolor{keywordflow}{return} Response::api()->errorNotFound(\textcolor{stringliteral}{'User not found'});
199             \}
200             
201             \textcolor{comment}{// Filter query by user}
202             $query = $query->where(\textcolor{stringliteral}{'user\_id'}, $user->getKey());
203         \}
204 
205     
206         \textcolor{comment}{// Filter by activity type}
207         $types = !is\_null($types) ? explode(\textcolor{charliteral}{','}, $types): $types;
208         \textcolor{keywordflow}{if}(!is\_null($types)) \{
209             $query = $query->whereHas(\textcolor{stringliteral}{'activity'}, \textcolor{keyword}{function}($q) use ($types) \{
210                 $q->whereIn(\textcolor{stringliteral}{'activity\_type'}, $types);
211             \});
212         \}
213         
214         \textcolor{keywordflow}{return} $this->\hyperlink{classDMA_1_1Friends_1_1Classes_1_1API_1_1BaseResource_aed3811d426c80763855a43280f822f97}{paginateResult}($query);
215 
216     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_ae6a01ce9c7882d3c741f471557d5a8f2}{}\index{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource@{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource}!index\+By\+User@{index\+By\+User}}
\index{index\+By\+User@{index\+By\+User}!D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource@{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource}}
\subsubsection[{index\+By\+User}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+A\+P\+I\textbackslash{}\+Resources\textbackslash{}\+Activity\+Metadata\+Resource\+::index\+By\+User (
\begin{DoxyParamCaption}
\item[{}]{\$user\+Id = {\ttfamily null}}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_ae6a01ce9c7882d3c741f471557d5a8f2}
( path=\char`\"{}activity-\/metadata/user/\{user\}\char`\"{}, description=\char`\"{}\+Returns all activity medatadata of a user\char`\"{}, summary=\char`\"{}\+Returns all activity medatadata by user id\char`\"{}, tags=\{ \char`\"{}activity-\/metadata\char`\"{}\},

( ref=\char`\"{}\#/parameters/per\+\_\+page\char`\"{} ), ( ref=\char`\"{}\#/parameters/page\char`\"{} ), ( ref=\char`\"{}\#/parameters/sort\char`\"{} ),

( description=\char`\"{}\+I\+D of user activity medatadata to fetch\char`\"{}, format=\char`\"{}int64\char`\"{}, in=\char`\"{}path\char`\"{}, name=\char`\"{}user\char`\"{}, required=true, type=\char`\"{}integer\char`\"{} ),

( response=200, description=\char`\"{}\+Successful response\char`\"{}, (ref=\char`\"{}\#/definitions/activity.\+metadata\char`\"{}, type=\char`\"{}array\char`\"{}) ), ( response=500, description=\char`\"{}\+Unexpected error\char`\"{}, (ref=\char`\"{}\#/definitions/error500\char`\"{}) ), ( response=404, description=\char`\"{}\+Not Found\char`\"{}, (ref=\char`\"{}\#/definitions/error404\char`\"{}) ) ) Return activity metadata by the given user 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$user\+Id} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Response 
\end{DoxyReturn}

\begin{DoxyCode}
80     \{
81         \textcolor{keywordflow}{return} $this->\hyperlink{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_a489377740bd451341a243ba778b65e68}{indexByTypeAndUser}(null, $userId);
82     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_aa87d629932ed257089513010323e6f7e}{}\index{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource@{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource}!show@{show}}
\index{show@{show}!D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource@{D\+M\+A\+::\+Friends\+::\+A\+P\+I\+::\+Resources\+::\+Activity\+Metadata\+Resource}}
\subsubsection[{show}]{\setlength{\rightskip}{0pt plus 5cm}D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+A\+P\+I\textbackslash{}\+Resources\textbackslash{}\+Activity\+Metadata\+Resource\+::show (
\begin{DoxyParamCaption}
\item[{}]{\$id}
\end{DoxyParamCaption}
)}\label{classDMA_1_1Friends_1_1API_1_1Resources_1_1ActivityMetadataResource_aa87d629932ed257089513010323e6f7e}
( path=\char`\"{}activity-\/metadata/\{id\}\char`\"{}, description=\char`\"{}\+Returns an activity metadata by id\char`\"{}, summary=\char`\"{}\+Find an activity metadata by id\char`\"{}, tags=\{ \char`\"{}activity-\/metadata\char`\"{}\},

( description=\char`\"{}\+I\+D of activity metadata to fetch\char`\"{}, format=\char`\"{}int64\char`\"{}, in=\char`\"{}path\char`\"{}, name=\char`\"{}id\char`\"{}, required=true, type=\char`\"{}integer\char`\"{} ),

( response=200, description=\char`\"{}\+Successful response\char`\"{}, (ref=\char`\"{}\#/definitions/activity.\+metadata\char`\"{}) ), ( response=500, description=\char`\"{}\+Unexpected error\char`\"{}, (ref=\char`\"{}\#/definitions/error500\char`\"{}) ), ( response=404, description=\char`\"{}\+Not Found\char`\"{}, (ref=\char`\"{}\#/definitions/error404\char`\"{}) ) ) 
\begin{DoxyCode}
312     \{
313         \textcolor{keywordflow}{return} parent::show($id);
314     \}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
api/resources/Activity\+Metadata\+Resource.\+php\end{DoxyCompactItemize}
