\hypertarget{classDMA_1_1Friends_1_1Classes_1_1AuthManager}{}\section{D\+M\+A\textbackslash{}Friends\textbackslash{}Classes\textbackslash{}Auth\+Manager Class Reference}
\label{classDMA_1_1Friends_1_1Classes_1_1AuthManager}\index{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Classes\textbackslash{}\+Auth\+Manager@{D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Classes\textbackslash{}\+Auth\+Manager}}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classDMA_1_1Friends_1_1Classes_1_1AuthManager_a22836fc33b7788f7b41bbb253c6f58af}{auth} (\$data, \$rules=\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Member Function Documentation}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1AuthManager_a22836fc33b7788f7b41bbb253c6f58af}{}\index{D\+M\+A\+::\+Friends\+::\+Classes\+::\+Auth\+Manager@{D\+M\+A\+::\+Friends\+::\+Classes\+::\+Auth\+Manager}!auth@{auth}}
\index{auth@{auth}!D\+M\+A\+::\+Friends\+::\+Classes\+::\+Auth\+Manager@{D\+M\+A\+::\+Friends\+::\+Classes\+::\+Auth\+Manager}}
\subsubsection[{auth}]{\setlength{\rightskip}{0pt plus 5cm}static D\+M\+A\textbackslash{}\+Friends\textbackslash{}\+Classes\textbackslash{}\+Auth\+Manager\+::auth (
\begin{DoxyParamCaption}
\item[{}]{\$data, }
\item[{}]{\$rules = {\ttfamily \mbox{[}\mbox{]}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{classDMA_1_1Friends_1_1Classes_1_1AuthManager_a22836fc33b7788f7b41bbb253c6f58af}
Authenticate a user by either username, email, or member id


\begin{DoxyParams}[1]{Parameters}
array & {\em \$data} & An array of attributes to authenticate a user minimially requires the following
\begin{DoxyItemize}
\item login Provide either the email address or username to authenticate. This setting is configured in the administrative backend or
\item member\+\_\+id The member id stored in the usermeta-\/$>$current\+\_\+member\+\_\+number field
\item password A password
\item no\+\_\+password If true password authentication will be bypassed. Use with caution as this can be a security breach if used incorrectly.
\end{DoxyItemize}\\
\hline
array & {\em \$rules} & A set of validation rules to validate against see \href{http://laravel.com/docs/5.1/validation}{\tt http\+://laravel.\+com/docs/5.\+1/validation}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
boolean returns true if the user is authenticated 
\end{DoxyReturn}

\begin{DoxyCode}
39     \{
40         $user = \textcolor{keyword}{false};
41 
42         \textcolor{comment}{// Fire prelogin event before we start processing the user}
43         Event::fire(\textcolor{stringliteral}{'auth.prelogin'}, $data, $rules);
44 
45         \textcolor{keywordflow}{if} (!isset($data[\textcolor{stringliteral}{'no\_password'}])) \{
46             $data[\textcolor{stringliteral}{'no\_password'}] = \textcolor{keyword}{false};
47         \}
48 
49         \textcolor{keywordflow}{if} (!$data[\textcolor{stringliteral}{'no\_password'}]) \{
50             \textcolor{keywordflow}{if} (!isset($rules[\textcolor{stringliteral}{'password'}])) \{
51                 $rules[\textcolor{stringliteral}{'password'}] = \textcolor{stringliteral}{'required|min:4'};
52             \}
53 
54             \textcolor{keywordflow}{if} (!isset($rules[\textcolor{stringliteral}{'login'}])) \{
55                 $rules[\textcolor{stringliteral}{'login'}] = \textcolor{stringliteral}{'required|between:4,64'};
56             \}
57 
58             \textcolor{comment}{/*}
59 \textcolor{comment}{             * Validate user credentials}
60 \textcolor{comment}{             */}
61             $validation = Validator::make($data, $rules);
62             \textcolor{keywordflow}{if} ($validation->fails()) \{
63                 \textcolor{keywordflow}{throw} \textcolor{keyword}{new} \hyperlink{namespaceValidationException}{ValidationException}($validation);
64             \}
65 
66         \}
67 
68         \textcolor{comment}{// Attempt to lookup by member\_id}
69         \textcolor{keywordflow}{if} (!$user) \{
70             $user = self::isMember($data[\textcolor{stringliteral}{'login'}]);
71         \}
72 
73         \textcolor{comment}{// Attempt to look up barcode}
74         \textcolor{keywordflow}{if} (!$user) \{
75             $user = self::isBarcode($data[\textcolor{stringliteral}{'login'}]);
76         \}
77    
78         \textcolor{keywordflow}{if} ($user && $data[\textcolor{stringliteral}{'no\_password'}]) \{
79             Auth::login($user);
80         \} \textcolor{keywordflow}{else} \{
81             $user = self::loginUser($user, $data);
82         \}
83 
84         \textcolor{keywordflow}{if} ($user) \{
85             Event::fire(\textcolor{stringliteral}{'auth.login'}, $user);
86             \textcolor{keywordflow}{return} \textcolor{keyword}{true};
87         \}
88 
89         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
90     \}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
classes/Auth\+Manager.\+php\end{DoxyCompactItemize}
