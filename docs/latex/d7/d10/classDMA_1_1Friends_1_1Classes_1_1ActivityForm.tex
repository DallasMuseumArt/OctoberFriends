\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm}{\section{D\-M\-A\textbackslash{}Friends\textbackslash{}Classes\textbackslash{}Activity\-Form Class Reference}
\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm}\index{D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Activity\-Form@{D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Activity\-Form}}
}
Inheritance diagram for D\-M\-A\textbackslash{}Friends\textbackslash{}Classes\textbackslash{}Activity\-Form\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{d7/d10/classDMA_1_1Friends_1_1Classes_1_1ActivityForm}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_afcb45ea0cd733979ad0429595a497223}{{\bfseries \-\_\-\-\_\-construct} (\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityManager}{Activity\-Manager} \$manager, \$model, \$field\-Name)}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_afcb45ea0cd733979ad0429595a497223}

\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_afac6868b7400de0a27bd9940db9bb43d}{render} ()
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a67f1c67ad0885f8ade7cc055db01d36a}{get\-View\-Path} (\$file\-Name, \$view\-Path=null)
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a903a1043ee05a6f169d5aea07ef0bb79}{render\-Field} (\$field, \$options=\mbox{[}$\,$\mbox{]})
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ab7d19395c670391b052793e77fd364f2}{get\-Field\-Value} (\$field)
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a105d514226be33dec93db56dbfe61ff1}{get\-Field\-Name} (\$field)
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ae7e6de46fdaa48ef75743de550e0c87b}{get\-Field\-Depends} (\$field)
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a5a5fbcb361a17abaa69b260df1a4a94b}{render\-Field\-Element} (\$field)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ab9f1445590940a3564581d3481b942c5}{{\bfseries \$fields} = \mbox{[}$\,$\mbox{]}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ab9f1445590940a3564581d3481b942c5}

\item 
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ac7ba33a73e3e8269a24e2b1b37b8778a}{{\bfseries \$preview\-Mode} = false}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ac7ba33a73e3e8269a24e2b1b37b8778a}

\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a8e64eb3aac3a88edbbc67700f40f7f61}{make\-Form\-Field} (\$name, \$config)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a6625f7f805756ad348523c8efc7eaba2}{{\bfseries \$manager}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a6625f7f805756ad348523c8efc7eaba2}

\item 
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_afa057e497b595e91ff28b7d82d453a19}{{\bfseries \$model}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_afa057e497b595e91ff28b7d82d453a19}

\item 
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a661164febcd7fafdb40b95f4fceb0539}{{\bfseries \$partials\-Dir} = '@/modules/backend/widgets/form/partials/'}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a661164febcd7fafdb40b95f4fceb0539}

\item 
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a7bba50ae9e6c7fe7fd5cbaa8dcf7a976}{{\bfseries \$data} = \mbox{[}$\,$\mbox{]}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a7bba50ae9e6c7fe7fd5cbaa8dcf7a976}

\item 
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ae59dff70c79843060bc487578fae0846}{{\bfseries \$field\-Name}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ae59dff70c79843060bc487578fae0846}

\end{DoxyCompactItemize}


\subsection{Member Function Documentation}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ae7e6de46fdaa48ef75743de550e0c87b}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}!get\-Field\-Depends@{get\-Field\-Depends}}
\index{get\-Field\-Depends@{get\-Field\-Depends}!DMA::Friends::Classes::ActivityForm@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}}
\subsubsection[{get\-Field\-Depends}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Activity\-Form\-::get\-Field\-Depends (
\begin{DoxyParamCaption}
\item[{}]{\$field}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ae7e6de46fdaa48ef75743de550e0c87b}
Returns a H\-T\-M\-L encoded value containing the other fields this field depends on 
\begin{DoxyParams}{Parameters}
{\em use} & Backend \$field \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string 
\end{DoxyReturn}

\begin{DoxyCode}
246     \{
247         \textcolor{keywordflow}{if} (!$field->depends) \{
248             \textcolor{keywordflow}{return};
249         \}
250 
251         $depends = is\_array($field->depends) ? $field->depends : [$field->depends];
252         $depends = htmlspecialchars(json\_encode($depends), ENT\_QUOTES, \textcolor{stringliteral}{'UTF-8'});
253         \textcolor{keywordflow}{return} $depends;
254     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a105d514226be33dec93db56dbfe61ff1}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}!get\-Field\-Name@{get\-Field\-Name}}
\index{get\-Field\-Name@{get\-Field\-Name}!DMA::Friends::Classes::ActivityForm@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}}
\subsubsection[{get\-Field\-Name}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Activity\-Form\-::get\-Field\-Name (
\begin{DoxyParamCaption}
\item[{}]{\$field}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a105d514226be33dec93db56dbfe61ff1}
Parses a field's name 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$field} & Field name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array \mbox{[}column\-Name, context\mbox{]} 
\end{DoxyReturn}

\begin{DoxyCode}
229     \{
230         $field = $this->fieldName . \textcolor{charliteral}{'['} . $field . \textcolor{charliteral}{']'};
231 
232         \textcolor{keywordflow}{if} (strpos($field, \textcolor{charliteral}{'@'}) === \textcolor{keyword}{false}) \{
233             \textcolor{keywordflow}{return} [$field, null];
234         \}
235 
236         \textcolor{keywordflow}{return} explode(\textcolor{charliteral}{'@'}, $field);
237     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ab7d19395c670391b052793e77fd364f2}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}!get\-Field\-Value@{get\-Field\-Value}}
\index{get\-Field\-Value@{get\-Field\-Value}!DMA::Friends::Classes::ActivityForm@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}}
\subsubsection[{get\-Field\-Value}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Activity\-Form\-::get\-Field\-Value (
\begin{DoxyParamCaption}
\item[{}]{\$field}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ab7d19395c670391b052793e77fd364f2}
Looks up the column 
\begin{DoxyCode}
196     \{
197         \textcolor{keywordflow}{if} (is\_string($field)) \{
198             \textcolor{keywordflow}{if} (!isset($this->fields[$field])) \{
199                 \textcolor{keywordflow}{throw} \textcolor{keyword}{new} ApplicationException(Lang::get(
200                     \textcolor{stringliteral}{'backend::lang.form.missing\_definition'},
201                     compact(\textcolor{stringliteral}{'field'})
202                 ));
203             \}
204 
205             $field = $this->fields[$field];
206         \}
207 
208         $fieldName = $field->fieldName;
209 
210         $defaultValue = strlen($field->defaults) ? $field->defaults : null;
211 
212         \textcolor{comment}{/*}
213 \textcolor{comment}{         * Array field name, eg: field[key][key2][key3]}
214 \textcolor{comment}{         */}
215         $keyParts   = Str::evalHtmlArray($fieldName);
216         $lastField  = end($keyParts);
217         $result     = $this->data;
218 
219         \textcolor{comment}{// Sub fields are always the last field in the array}
220         \textcolor{keywordflow}{return} $result[$lastField];
221     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a67f1c67ad0885f8ade7cc055db01d36a}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}!get\-View\-Path@{get\-View\-Path}}
\index{get\-View\-Path@{get\-View\-Path}!DMA::Friends::Classes::ActivityForm@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}}
\subsubsection[{get\-View\-Path}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Activity\-Form\-::get\-View\-Path (
\begin{DoxyParamCaption}
\item[{}]{\$file\-Name, }
\item[{}]{\$view\-Path = {\ttfamily null}}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a67f1c67ad0885f8ade7cc055db01d36a}
Locates a file based on it's definition. If the file starts with an \char`\"{}at symbol\char`\"{}, it will be returned in context of the application base path, otherwise it will be returned in context of the view path. 
\begin{DoxyParams}[1]{Parameters}
string & {\em \$file\-Name} & File to load. \\
\hline
mixed & {\em \$view\-Path} & Explicitly define a view path. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string Full path to the view file. 
\end{DoxyReturn}

\begin{DoxyCode}
92     \{
93 
94         $fileName = File::symbolizePath($fileName, $fileName);
95 
96         \textcolor{keywordflow}{if} (File::isLocalPath($fileName) || realpath($fileName) !== \textcolor{keyword}{false}) \{
97             \textcolor{keywordflow}{return} $fileName;
98         \} \textcolor{keywordflow}{else} \{
99             $path = $this->partialsDir . $fileName;
100             \textcolor{keywordflow}{return} File::symbolizePath($path, $path);
101         \}
102 
103     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a8e64eb3aac3a88edbbc67700f40f7f61}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}!make\-Form\-Field@{make\-Form\-Field}}
\index{make\-Form\-Field@{make\-Form\-Field}!DMA::Friends::Classes::ActivityForm@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}}
\subsubsection[{make\-Form\-Field}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Activity\-Form\-::make\-Form\-Field (
\begin{DoxyParamCaption}
\item[{}]{\$name, }
\item[{}]{\$config}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a8e64eb3aac3a88edbbc67700f40f7f61}
Creates a form field object from name and configuration. 
\begin{DoxyCode}
136     \{
137         $label = (isset($config[\textcolor{stringliteral}{'label'}])) ? $config[\textcolor{stringliteral}{'label'}] : null;
138         list($fieldName, $fieldContext) = $this->\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a105d514226be33dec93db56dbfe61ff1}{getFieldName}($name);
139 
140         $field = \textcolor{keyword}{new} FormField($fieldName, $label);
141         \textcolor{keywordflow}{if} ($fieldContext) \{
142             $field->context = $fieldContext;
143         \}
144         $field->idPrefix = $this->getId();
145 
146         \textcolor{comment}{/*}
147 \textcolor{comment}{         * Simple field type}
148 \textcolor{comment}{         */}
149         \textcolor{keywordflow}{if} (is\_string($config)) \{
150             $field->displayAs($config);
151         \textcolor{comment}{/*}
152 \textcolor{comment}{         * Defined field type}
153 \textcolor{comment}{         */}
154         \} \textcolor{keywordflow}{else} \{
155 
156             $fieldType = isset($config[\textcolor{stringliteral}{'type'}]) ? $config[\textcolor{stringliteral}{'type'}] : null;
157             \textcolor{keywordflow}{if} (!is\_string($fieldType) && !is\_null($fieldType)) \{
158                 \textcolor{keywordflow}{throw} \textcolor{keyword}{new} ApplicationException(Lang::get(
159                     \textcolor{stringliteral}{'backend::lang.field.invalid\_type'},
160                     [\textcolor{stringliteral}{'type'}=>gettype($fieldType)]
161                 ));
162             \}
163 
164             $field->displayAs($fieldType, $config);
165 
166         \}
167 
168         \textcolor{comment}{/*}
169 \textcolor{comment}{         * Set field value}
170 \textcolor{comment}{         */}
171         $field->value = $this->\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_ab7d19395c670391b052793e77fd364f2}{getFieldValue}($field);
172 
173         \textcolor{comment}{/*}
174 \textcolor{comment}{         * Get field options from model}
175 \textcolor{comment}{         */}
176         $optionModelTypes = [\textcolor{stringliteral}{'dropdown'}, \textcolor{stringliteral}{'radio'}, \textcolor{stringliteral}{'checkboxlist'}, \textcolor{stringliteral}{'balloon-selector'}];
177         \textcolor{keywordflow}{if} (in\_array($field->type, $optionModelTypes)) \{
178 
179             \textcolor{comment}{/*}
180 \textcolor{comment}{             * Defer the execution of option data collection}
181 \textcolor{comment}{             */}
182             $field->options(\textcolor{keyword}{function} () use ($field, $config) \{
183                 $fieldOptions = (isset($config[\textcolor{stringliteral}{'options'}])) ? $config[\textcolor{stringliteral}{'options'}] : null;
184                 $fieldOptions = $this->getOptionsFromModel($field, $fieldOptions);
185                 \textcolor{keywordflow}{return} $fieldOptions;
186             \});
187         \}
188 
189         \textcolor{keywordflow}{return} $field;
190     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_afac6868b7400de0a27bd9940db9bb43d}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}!render@{render}}
\index{render@{render}!DMA::Friends::Classes::ActivityForm@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}}
\subsubsection[{render}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Activity\-Form\-::render (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_afac6868b7400de0a27bd9940db9bb43d}
Render a group of form elements 
\begin{DoxyCode}
71     \{
72         $fields = [];
73 
74         \textcolor{keywordflow}{foreach}($this->fields as $name => $field) \{
75             $field = $this->\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a8e64eb3aac3a88edbbc67700f40f7f61}{makeFormField}($name, $field);
76 
77             $fields[] = $this->\hyperlink{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a903a1043ee05a6f169d5aea07ef0bb79}{renderField}($field);
78         \}
79 
80         \textcolor{keywordflow}{return} implode(\textcolor{stringliteral}{"<br/>"}, $fields);
81     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a903a1043ee05a6f169d5aea07ef0bb79}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}!render\-Field@{render\-Field}}
\index{render\-Field@{render\-Field}!DMA::Friends::Classes::ActivityForm@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}}
\subsubsection[{render\-Field}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Activity\-Form\-::render\-Field (
\begin{DoxyParamCaption}
\item[{}]{\$field, }
\item[{}]{\$options = {\ttfamily \mbox{[}\mbox{]}}}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a903a1043ee05a6f169d5aea07ef0bb79}
Renders a single form field 
\begin{DoxyParams}{Parameters}
{\em A} & field name or field object \\
\hline
{\em array} & An array of options \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
111     \{
112         \textcolor{keywordflow}{if} (is\_string($field)) \{
113             \textcolor{keywordflow}{if} (!isset($this->fields[$field])) \{
114                 \textcolor{keywordflow}{throw} \textcolor{keyword}{new} ApplicationException(Lang::get(
115                     \textcolor{stringliteral}{'backend::lang.form.missing\_definition'},
116                     compact(\textcolor{stringliteral}{'field'})
117                 ));
118             \}
119 
120             $field = $this->fields[$field];
121         \}
122 
123         \textcolor{keywordflow}{if} (!isset($options[\textcolor{stringliteral}{'useContainer'}])) \{
124             $options[\textcolor{stringliteral}{'useContainer'}] = \textcolor{keyword}{true};
125         \}
126         $targetPartial = $options[\textcolor{stringliteral}{'useContainer'}] ? \textcolor{stringliteral}{'\_field-container.htm'} : \textcolor{stringliteral}{'\_field.htm'};
127         $targetPartial = $this->partialsDir . $targetPartial;
128 
129         \textcolor{keywordflow}{return} $this->makePartial($targetPartial, [\textcolor{stringliteral}{'field'} => $field]);
130     \}
\end{DoxyCode}
\hypertarget{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a5a5fbcb361a17abaa69b260df1a4a94b}{\index{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}!render\-Field\-Element@{render\-Field\-Element}}
\index{render\-Field\-Element@{render\-Field\-Element}!DMA::Friends::Classes::ActivityForm@{D\-M\-A\-::\-Friends\-::\-Classes\-::\-Activity\-Form}}
\subsubsection[{render\-Field\-Element}]{\setlength{\rightskip}{0pt plus 5cm}D\-M\-A\textbackslash{}\-Friends\textbackslash{}\-Classes\textbackslash{}\-Activity\-Form\-::render\-Field\-Element (
\begin{DoxyParamCaption}
\item[{}]{\$field}
\end{DoxyParamCaption}
)}}\label{classDMA_1_1Friends_1_1Classes_1_1ActivityForm_a5a5fbcb361a17abaa69b260df1a4a94b}
Renders the H\-T\-M\-L element for a field 
\begin{DoxyCode}
260     \{
261         \textcolor{keywordflow}{return} $this->makePartial(\textcolor{stringliteral}{'field\_'}.$field->type, [\textcolor{stringliteral}{'field'} => $field]);
262     \}
\end{DoxyCode}


The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
classes/Activity\-Form.\-php\end{DoxyCompactItemize}
